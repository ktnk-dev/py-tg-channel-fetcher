# О проекте 
- Python скрипт для получения информации о публичном телеграм канале и получения постов в этом канале. 
- Зависимости: `requests`, `bs4`, `lxml`
- Версия: `release`/`0.3`
# Какую информацию получает скрипт с канала
Скрипт возвращает класс:
```py
self.status = True # статус
self.url = <class 'str'> # ссылка на канал
self.name = <class 'str'> # название канала
self.description = <class 'str'> # описание канала
self.subscribers = <class 'int'> # кол-во подписчиков
self.picture = <class 'str'> # ссылка на аватарку канала
self.latests = <class 'list'> # последние 20 постов в канале
self.post(id) # функция для получения определенных постов
```
Иногда бывают ошибки. Тогда будет выведена другая информация
```py
self.status = None,
sels.text = <class 'str'> # информация об ошибке

```

В `self.latests` лежит список из 20 последних постов в канале (при вызове функции `self.post(id)` будет выдан лишь один запрашиваемый пост, но формат не меняется)
```py
self.status: True, # принимает None при ошибке
self.text: <class 'str'>, # текст в этом посте, если текста нет, то возвращает None. Если status == None, то здесь текст ошибки
self.id: <class 'int'>, # ID поста
self.url: <class 'str'>, # ссылка на пост
self.media: <class 'list'>, # список ссылок на прикрепленные фотографии. принимает None если фотографий нет
self.datetime: <class 'str'> # строка, в которой написана дата и время публикации. пользователь сам может конвертировать его в <class 'datetime.datetime'> при необходимости.
 
```
# Как этим пользоваться 
1. Скачайте этот скрипт с этого репозитория и импортируйте в свой проект (скоро выложу на pypi) 
2. Используйте пока единственный класс в скрипте `get(name)` и наслаждайтесь 
- Например:
```py
import pytgcf
channel = pytgcf.get('durov')

channel.name # -> Durov's Channel
channel.description # -> Thoughts from the Product Manager / CEO / Founder of Telegram.
```

- Так же мы можем получить определенный пост, используя функцию `self.post(id)` где первым аргументом вводим айди поста
```py
import pytgcf
channel = pytgcf.get('durov')

post = channel.post(200) # будет получен пост под id 200
post.text # текст с поздравлением с хелоуином
post.views # количество просмотров 
```

- Так же мы можем получить один из 20 последних постов на канале, для этого нужно вписать отрицательное число в параметр id (от -1 до -20)
```py
import pytgcf
channel = pytgcf.get('durov')

channel.post(-1) # будет получен самый актуальный (последний) пост канала
# эквивалент: channel.latests[-1]

channel.post(-2) # будет получен предпоследний пост с канала
# эквивалент: channel.latests[-2]
```

# TODO
- ~Аватарка канала~ (готово v0.2)
- ~Количество подписчиков~ (готово v0.2)
- ~Количество просмотров на посте~ (готово v0.2)
- ~Список реакций~ (невозможно)
- Комментарии (upd: это возможно через эксплуатацию веб-виджетов тг. будет реализовано в `0.4` )
- В далеком будующем сделать на основе этого REST API

# О получаемых данных
• Анонимный просмотр канала с браузера не позволяет получить достаточное колчество информаций. Например нельзя просматривать и загружать видео, частично голосовые сообщения, частично видео сообщения, и скачивать файлы. Можно лишь смотреть фото. Увы, это особенность Telegram, и мой скрипт физически не сможет получить доступ к описаному выше. 

# CHANGELOG
- **0.3**:
`self.posts(id)` заменен на `self.post(id)`, выдает теперь не список, а готовый класс с нужной информацией о посте 

- **0.2**:
теперь при вызове `pytgcf.get(name)` создается класс с информацией о канале, где `name` это сокращенное имя (link) на канал. реализован там почти половина TODO. посты получать в `pytgcf.get(name).posts(id)` или готовый `pytgcf.get(name).latests` где 20 последних постов

- **0.1**:
проект создан.
`pytgcf.get(name,id)` выводит список из словарей с информацией о посте
